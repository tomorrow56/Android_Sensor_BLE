# IMU Cube Visualizer

Web Bluetooth APIを使用してAndroidアプリのIMUセンサーデータを受信し、3Dキューブで可視化するWebアプリケーションです。

## 概要

このアプリケーションは、AndroidスマートフォンがBluetooth Low Energy (BLE) 経由で送信するIMUセンサーデータをWebブラウザで直接受信し、リアルタイムで3Dキューブの姿勢として表示します。

### 主な機能

- **Bluetooth接続**: Web Bluetooth APIでAndroidデバイスに接続
- **3D可視化**: Three.jsを使用した3Dキューブのリアルタイム描画
- **姿勢追跡**: 加速度センサーとジャイロスコープのデータから姿勢を計算
- **インタラクティブ**: マウスドラッグで視点変更、ホイールでズーム
- **リアルタイムデータ表示**: 加速度とジャイロのX/Y/Z軸データを数値表示
- **モダンなUI**: ダークテーマのグラデーションデザイン

## 必要な環境

### ブラウザ要件

Web Bluetooth APIは以下のブラウザでサポートされています：

- **Chrome** (推奨)
- **Edge** (Chromiumベース)
- **Opera** (Chromiumベース)

**注**: FirefoxはWeb Bluetooth APIをサポートしていません。

### Androidアプリ要件

- BLE Peripheral機能を実装したAndroidセンサーアプリ
- GitHubリポジトリ: https://github.com/tomorrow56/Android_Sensor_BLE/
- サービスUUID: `0000180a-0000-1000-8000-00805f9b34fb`
- キャラクタリスティックUUID: `00002a57-0000-1000-8000-00805f9b34fb`
- JSON形式でセンサーデータを送信

## 使用方法

### 1. アプリケーションの起動

#### ローカルで実行する場合

```bash
# Python 3の場合
python -m http.server 8000

# Node.jsの場合
npx http-server
```

ブラウザで `http://localhost:8000` にアクセスします。

#### GitHub Pagesで公開されている場合

直接URLにアクセスしてください。

### 2. Bluetoothデバイスへの接続

1. **「デバイスに接続」**ボタンをクリック
2. ブラウザのBluetoothデバイス選択ダイアログでAndroidデバイスを選択
3. ペアリングを完了（必要な場合）
4. 接続が完了するとステータスが「接続済み」に変わります

### 3. データ受信の開始

1. 接続完了後、**「データ受信開始」**ボタンをクリック
2. Androidアプリでセンサーデータの送信を開始
3. 3Dキューブがリアルタイムでスマートフォンの姿勢を反映します

### 4. 視点操作

- **マウスドラッグ**: 視点を回転
- **マウスホイール**: ズームイン/ズームアウト

## データ形式

### 受信するJSONデータ

```json
{
  "timestamp": 1678886400000,
  "accelerometer": {
    "x": 0.1,
    "y": 0.2,
    "z": 9.8
  },
  "gyroscope": {
    "x": 0.01,
    "y": -0.02,
    "z": 0.0
  },
  "light": {
    "lux": 150.0
  },
  "gps": {
    "latitude": 35.6895,
    "longitude": 139.6917,
    "altitude": 50.0,
    "accuracy": 10.0,
    "speed": 0.5
  }
}
```

## 画面の説明

### 3Dビューア

- 左側の大きなエリアに3Dキューブが表示されます
- キューブの各面は異なる色で色分けされています：
  - 右面: 赤
  - 左面: 青
  - 上面: 緑
  - 下面: 黄色
  - 前面: 紫
  - 後面: オレンジ

### コントロールパネル

- **接続状態**: 現在のBluetooth接続状態を表示
- **接続/切断ボタン**: Bluetoothデバイスの接続・切断
- **受信開始/停止ボタン**: センサーデータ受信の開始・停止
- **センサーデータ表示**: 加速度とジャイロの数値をリアルタイム表示

## トラブルシューティング

### 接続できない場合

1. **ブラウザの確認**: Web Bluetooth APIをサポートしたブラウザを使用しているか確認
2. **Bluetoothの有効化**: デバイスのBluetoothが有効になっているか確認
3. **Androidアプリの確認**: BLEアドバタイズが有効になっているか確認
4. **HTTPSの確認**: Web Bluetooth APIはHTTPS環境またはlocalhostでのみ動作

### データが受信できない場合

1. **Androidアプリの確認**: センサーデータの送信が開始されているか確認
2. **UUIDの確認**: サービスUUIDとキャラクタリスティックUUIDが一致しているか確認
3. **Notificationの確認**: AndroidアプリがBLE Notificationを送信しているか確認

### キューブが動かない場合

1. **データ受信の確認**: センサーデータの数値が更新されているか確認
2. **ブラウザコンソール**: F12でコンソールを開き、エラーメッセージを確認
3. **Androidアプリの確認**: 正しいJSON形式でデータが送信されているか確認

## 技術仕様

- **Web Bluetooth API**: W3C標準
- **3Dレンダリング**: Three.js r128
- **BLEプロファイル**: Custom Service
- **データ形式**: JSON (UTF-8)
- **対応プロトコル**: Bluetooth Low Energy (BLE)
- **最小要件**: HTTPS環境またはlocalhost

## セキュリティについて

- Web Bluetooth APIはユーザーの明示的な許可なしにデバイスにアクセスできません
- 接続は現在のセッションのみ有効で、ページを更新すると再接続が必要です
- 通信は暗号化されています

## ライセンス

MIT License

## 作者

Manus AI
